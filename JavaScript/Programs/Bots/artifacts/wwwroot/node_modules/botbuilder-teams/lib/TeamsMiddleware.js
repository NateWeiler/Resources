"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var StripBotAtMentions = (function () {
    function StripBotAtMentions() {
        this.botbuilder = function (session, next) {
            var message = session.message;
            if (message) {
                var botMri_1 = message.address.bot.id.toLowerCase();
                var botAtMentions = message.entities && message.entities.filter(function (entity) { return (entity.type === "mention") && (entity.mentioned.id.toLowerCase() === botMri_1); });
                if (botAtMentions && botAtMentions.length) {
                    message.textWithBotMentions = message.text;
                    message.text = botAtMentions.reduce(function (previousText, entity) {
                        return previousText.replace(entity.text, "").trim();
                    }, message.text);
                }
            }
            next();
        };
    }
    return StripBotAtMentions;
}());
exports.StripBotAtMentions = StripBotAtMentions;
